<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

		<template id="mercadopago_form">
			<div>
				<!-- TODO: change this -->
				<input data-remove-me="" name="data_set" t-att-data-action-url="tx_url" type="hidden"/>
				<input name="cmd" t-att-value="cmd" type="hidden"/>
				<input name="mercadopago_data" t-att-value="mercadopago_data" type="hidden"/>
			</div>
			<script type="text/javascript">
                odoo.define(function (require) {
                    var ajax = require('web.ajax');
                    ajax.loadJS("/payment_mercadopago/static/src/js/payment_form.js");
                    ajax.loadJS("/payment_mercadopago/static/lib/js/jquery_payform_min.js");
                });
            </script>
		</template>

		<template id="payment_mercadopago_redirect" name="Payment MercadoPago">
			<script type="text/javascript">
				window.location.href = '<t t-esc="return_url"/>';
			</script>
		</template>

		<template id="mercadopago_s2s_form">
			<!-- TODO: change this -->
                <input type="hidden" name="data_set" value="/payment/mercadopago/s2s/create_json_3ds"/>
                <input type="hidden" name="acquirer_id" t-att-value="id"/>
                <input type="hidden" name="acquirer_state" t-att-value="acq.state"/>
                <!-- <input type="hidden" name="login_id" t-att-value="acq.sudo().mercadopago_login"/> -->
                <!-- <input type="hidden" name="client_key" t-att-value="acq.sudo().mercadopago_client_key"/> -->
                <input class="d-none" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input t-if="return_url" type="hidden" name="return_url" t-att-value="return_url"/>
                <input t-if="partner_id" type="hidden" name="partner_id" t-att-value="partner_id"/>
                <input type="hidden" name="mercadopago_publishable_key" t-att-value="acq.sudo().mercadopago_publishable_key"/>
                <!--<t t-if="order">-->
                    <!--<input type="hidden" name="order_amount" t-att-value="order.amount_total"/>-->
                <!--</t>-->

		</template>

		<template id="assets_frontend" inherit_id="web.assets_frontend">
            <xpath expr="script[last()]" position="after">
                <script type="text/javascript" src="/payment_mercadopago/static/src/js/payment_form.js"/>
                <script type="text/javascript" src="/payment_mercadopago/static/lib/js/jquery_payform_min.js" charset="utf-8"/>
            </xpath>
        </template>

		<template id="payment_tokens_list_mercadopago" inherit_id="payment.payment_tokens_list" name="Payment Tokens list MercadoPago">
            <xpath expr="//t[@t-foreach='pms']/t[1]" position="replace">
                <t t-if="not verify_validity or (pm.acquirer_id.check_validity and pm.verified) or not pm.acquirer_id.check_validity">
                    <div class="card-body o_payment_acquirer_select">
                        <span t-esc="pm.payment_method_id"/>
                        <t t-if="pm.payment_method_id == 'master'">
                            <img alt="MasterCard" src="/payment_mercadopago/static/src/img/mastercard.jpg" title="MasterCard" style="max-width: 45px; border-radius: 3px;"/>
                        </t>
                        <t t-if="pm.payment_method_id == 'visa'">
                            <img alt="Visa" src="/payment_mercadopago/static/src/img/visa.jpg" title="Visa" style="max-width: 45px; border-radius: 3px;"/>
                        </t>
                        <t t-if="pm.payment_method_id == 'amex'">
                            <img alt="American Express" src="/payment_mercadopago/static/src/img/amex.jpg" title="American Express" style="max-width: 45px; border-radius: 3px;"/>
                        </t>
                        <label>
                            <input t-if="mode == 'payment'" type="radio" name="pm_id" t-att-data-card_id="pm.card_id" t-att-data-customer_id="pm.partner_id.mp_id" t-att-data-acquirer-id="pm.acquirer_id.id or False" t-att-value="pm.id" t-att-data-mercadopago="'True' if pm.mercadopago else 'False'" t-att-checked="checked_pm_id == pm.id" class="id_payment_token"/>
                            <span class="payment_option_name ml16" t-esc="pm.name"/>
                            <t t-if="pm.verified">
                                <i class="fa fa-check text-success" title="This payment method is verified by our system." role="img" aria-label="Ok"></i>
                            </t>
                            <t t-else="">
                                <i class="fa fa-check text-muted" title="This payment method has not been verified by our system." role="img" aria-label="Not verified"></i>
                            </t>
                        </label>
                        <button t-if="mode == 'manage'" name="delete_pm" t-att-value="pm.id" class="btn btn-primary btn-sm float-right">
                            <i class="fa fa-trash"></i> Delete
                        </button>
                    </div>
                </t>
            </xpath>
		</template>
	</data>
</odoo>

